<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FedEx Reset Password</title>
    <link rel="stylesheet" href="../css/reset-password.css" />
  </head>
  <body>
    <div class="theme-toggle">
      <input type="checkbox" id="theme-toggle" />
      <label for="theme-toggle">
        <span class="toggle-track"><span class="toggle-thumb"></span></span>
        <span class="toggle-text">Dark mode</span>
      </label>
    </div>
    <main class="page">
      <section class="auth-card">
        <div class="panel-left">
          <img
            class="logo"
            src="../images/icons8-fedex-100.png"
            alt="FedEx logo"
          />
          <h1 class="card-title">Reset password</h1>
          <p class="card-subtitle">
            Create a new password for your FedEx profile.
          </p>
          <ul class="feature-list">
            <li>Use at least 8 characters</li>
            <li>Mix letters and numbers</li>
            <li>Do not reuse old passwords</li>
          </ul>
        </div>
        <div class="panel-right">
          <form
            class="form-block"
            action="#"
            method="post"
            oninput="this.confirmPassword.setCustomValidity(this.confirmPassword.value === this.newPassword.value ? '' : 'Passwords do not match')"
          >
            <label class="field password-field">
              <span>New password</span>
              <div class="password-wrapper">
                <input
                  class="input strength-input"
                  type="password"
                  name="newPassword"
                  placeholder="At least 8 characters"
                  minlength="8"
                  pattern=".{8,}"
                  required
                />
                <button
                  class="toggle-password"
                  type="button"
                  aria-label="Show password"
                ></button>
              </div>

              <span class="strength-bar" aria-hidden="true"></span>
            </label>
            <label class="field password-field">
              <span>Confirm password</span>
              <div class="password-wrapper">
                <input
                  class="input match-input"
                  type="password"
                  name="confirmPassword"
                  placeholder="Repeat password"
                  minlength="8"
                  pattern=".{8,}"
                  required
                />
                <button
                  class="toggle-password"
                  type="button"
                  aria-label="Show password"
                ></button>
              </div>
            </label>
            <button class="button button-primary" type="submit">
              Reset password
            </button>
            <a class="button button-secondary" href="index.html"
              >Back to Login</a
            >
          </form>
        </div>
      </section>
    </main>
    <script>
      const toggleButtons = document.querySelectorAll(".toggle-password");
      toggleButtons.forEach((button) => {
        button.addEventListener("click", () => {
          const field = button.closest(".password-field");
          if (!field) return;
          const input = field.querySelector("input");
          if (!input) return;
          const isHidden = input.type === "password";
          input.type = isHidden ? "text" : "password";
          button.setAttribute(
            "aria-label",
            isHidden ? "Hide password" : "Show password"
          );
        });
      });

    const themeToggle = document.querySelector("#theme-toggle");
    const root = document.documentElement;
    let storedTheme = null;
    try {
      storedTheme = localStorage.getItem("theme");
      } catch (error) {
        storedTheme = null;
    }
    const prefersDark = window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const initialTheme = storedTheme || (prefersDark ? "dark" : "light");
    if (storedTheme) {
      root.setAttribute("data-theme", storedTheme);
    }
    if (themeToggle) {
      themeToggle.checked = initialTheme === "dark";
      themeToggle.addEventListener("change", () => {
          const nextTheme = themeToggle.checked ? "dark" : "light";
          root.setAttribute("data-theme", nextTheme);
          try {
            localStorage.setItem("theme", nextTheme);
          } catch (error) {
            return;
          }
        });
      }
    </script>
  </body>
</html>
